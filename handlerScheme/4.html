<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
</head>
<body>
  <a href="#" onclick="openAppOrRedirect()">Open App2</a>

  <script>
    function openAppOrRedirect() {
      const appScheme = "https://cobeco.github.io/v?apn=com.bok.cordova&isi=862317389&ibi=tw.com.bok.BankOfKaohsiung&efr=0&link=https://bok.com.tw?key=/BOKMobileWeb/www/index.html?action=BOK666/OpenBankAccBind&nLogin=N?uri=https://epassbooksys.tdcc.com.tw/MPSBKV2/rest/tsp/TSP012/016&state=648780&scope=deposit:account:inquiry&response_type=code&client_id=TdccClientID&user_id=90EE326372BC3D592AE82CEF2C51C806"; // App Link
      const appStoreLink = "https://apps.apple.com/app/id862317389"; // Apple App Store 連結
      const playStoreLink = "https://play.google.com/store/apps/details?id=com.bok.cordova"; // Google Play 連結

      const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
      const isAndroid = /Android/i.test(navigator.userAgent);
      const storeLink = isIOS ? appStoreLink : playStoreLink;

      let appOpened = false;

      document.addEventListener("visibilitychange", () => {
        if (document.visibilityState === "hidden") {
          appOpened = true; 
        }
      });

      window.location.href = appScheme;

      setTimeout(() => {
        if (!appOpened) {
          window.location.href = storeLink; 
        }
      }, 1500);
    }
  </script>
</body>
</html>

